Description: Fix barbican-api defaults
Author: Thomas Goirand <zigo@debian.org>
Forwarded: no
Last-Update: 2016-03-24

--- barbican-2.0.0~rc1.orig/bin/barbican-api
+++ barbican-2.0.0~rc1/bin/barbican-api
@@ -4,14 +4,14 @@ from paste import deploy
 from paste import httpserver
 
 def run():
-    prop_dir = 'etc/barbican'
+    prop_dir = '/etc/barbican'
 
     application = deploy.loadapp(
         'config:{prop_dir}/barbican-api-paste.ini'.format(prop_dir=prop_dir),
             name='main',
             relative_to='.')
 
-    httpserver.serve(application, host='127.0.0.1', port='9311')
+    httpserver.serve(application, host='0.0.0.0', port='9311')
 
 if __name__ == '__main__':
     run()
--- barbican-2.0.0~rc1.orig/etc/barbican/barbican-api-paste.ini
+++ barbican-2.0.0~rc1/etc/barbican/barbican-api-paste.ini
@@ -9,7 +9,8 @@ pipeline = cors versionapp
 
 # Use this pipeline for Barbican API - DEFAULT no authentication
 [pipeline:barbican_api]
-pipeline = cors unauthenticated-context apiapp
+pipeline = cors keystone_authtoken context apiapp
+#pipeline = cors unauthenticated-context apiapp
 
 #Use this pipeline to activate a repoze.profile middleware and HTTP port,
 #  to provide profiling information for the REST API processing.
